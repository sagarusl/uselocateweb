!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FlowGallery=e():t.FlowGallery=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var i=r(n(1)),o=r(n(2));n(3);var s=function(){function t(t){var e=this;this.galleryInstances=[],this.fullUpdate=this.fullUpdate.bind(this),this.update=this.update.bind(this),this.settings=new o.default,this.settings.applyOptions(t),Array.from(document.querySelectorAll(this.settings.selector)).forEach((function(t){e.galleryInstances.push(new i.default(e.settings,t))})),window.addEventListener("resize",this.fullUpdate),this.update()}return t.prototype.fullUpdate=function(){this.galleryInstances.forEach((function(t){t.fullUpdate()}))},t.prototype.update=function(){this.galleryInstances.forEach((function(t){t.update()}))},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};e.__esModule=!0;var o=function(){function t(t,e){this.settings=t,this.gallery=e,this.maxWidth=0,this.maxHeight=0,this.gapWidth=0,this.rows=0,this.stoppedAt=0,this.fullUpdate=this.fullUpdate.bind(this),this.update=this.update.bind(this)}return t.prototype.fullUpdate=function(){this.rows=0,this.stoppedAt=0,this.update()},t.prototype.update=function(){return r(this,void 0,void 0,(function(){var t,e,n,r,o,s,a,l,c;return i(this,(function(i){switch(i.label){case 0:t=this.gallery.children,this.maxWidth=Math.floor(this.gallery.clientWidth),this.maxHeight=this.getMaxHeight(this.maxWidth),this.gapWidth=this.getGapWidth(this.maxWidth),this.gallery.style.justifyContent=this.getAlignment(this.settings.align),this.gallery.classList.add("flow-gallery-grid"),e=0,n=this.maxHeight,r=[],o=this.stoppedAt,i.label=1;case 1:return o<t.length?(s=t[o],[4,this.getRatio(s)]):[3,5];case 2:return a=i.sent(),[4,this.getImageHeight(s)];case 3:l=i.sent(),!this.settings.enlarge&&l<n&&(c=l/n,n=l,e*=c),e+=a*n,r.push(s),e+this.getTotalGapWidth(r)>=this.maxWidth&&(this.createRow(r,e,n),e=0,n=this.maxHeight,r=[],this.stoppedAt=o+1),i.label=4;case 4:return o++,[3,1];case 5:return this.createRow(r,e,n),e=0,n=this.maxHeight,r=[],[2]}}))}))},t.prototype.createRow=function(t,e,n){return r(this,void 0,void 0,(function(){var r,o,s,a,l,c;return i(this,(function(i){switch(i.label){case 0:r=this.getTotalGapWidth(t),o=(this.maxWidth-r)/e,(n=Math.floor(n*o))>this.maxHeight&&!this.settings.fillLastLine&&(n=this.maxHeight),s=0,i.label=1;case 1:return s<t.length?(a=t[s],[4,this.getRatio(a)]):[3,4];case 2:l=i.sent(),c=Math.floor(l*n),a.style.width=c.toString()+"px",a.style.height=n.toString()+"px",a.style.marginLeft=s>0?this.gapWidth.toString()+"px":"0",a.style.marginTop=this.rows>0?this.gapWidth.toString()+"px":"0",i.label=3;case 3:return s++,[3,1];case 4:return this.rows++,[2]}}))}))},t.prototype.getRatio=function(t){return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.getReferenceImage(t)];case 1:return[2,(e=n.sent()).naturalWidth/e.naturalHeight]}}))}))},t.prototype.getImageHeight=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.getReferenceImage(t)];case 1:return[2,e.sent().naturalHeight]}}))}))},t.prototype.getReferenceImage=function(t){return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return t instanceof HTMLImageElement?[4,this.loadImage(t)]:[3,2];case 1:return n.sent(),[2,t];case 2:return(e=t.querySelector("img"))?[4,this.loadImage(e)]:[3,4];case 3:return n.sent(),[2,e];case 4:throw new Error("No reference image available.")}}))}))},t.prototype.loadImage=function(t){return new Promise((function(e){t.complete?e():t.addEventListener("load",(function(){e()}))}))},t.prototype.getGapWidth=function(t){return this.settings.percent?t/100*this.settings.gapWidth:this.settings.gapWidth},t.prototype.getTotalGapWidth=function(t){return(t.length-1)*this.gapWidth},t.prototype.getMaxHeight=function(t){return this.settings.percent?t/100*this.settings.maxHeight:this.settings.maxHeight},t.prototype.getAlignment=function(t){switch(t){case"center":return"center";case"right":return"flex-end";default:return"flex-start"}},t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){this.selector=".flow-gallery",this.maxHeight=400,this.gapWidth=10,this.percent=!1,this.fillLastLine=!1,this.enlarge=!1,this.align="left"}return t.prototype.applyOptions=function(t){Object.assign(this,t)},t}();e.default=r},function(t,e,n){var r=n(4);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(5)(!0)).push([t.i,".flow-gallery-grid{display:flex;flex-direction:row;flex-wrap:wrap}.flow-gallery-grid>*{display:block;position:relative}.flow-gallery-grid>*>img,.flow-gallery-grid>*>picture,.flow-gallery-grid>*>picture>img{display:block;width:100%}.flow-gallery-grid>*>.caption{visibility:hidden;position:absolute;left:0;right:0;bottom:0;padding:.5em 1em;background-color:rgba(0,0,0,.7);color:#fff;text-align:center}.flow-gallery-grid>*>.caption.inverted{background-color:hsla(0,0%,100%,.7);color:#000}.flow-gallery-grid>:hover>.caption{visibility:visible}","",{version:3,sources:["D:\\work\\flow-gallery/src\\flow-gallery.scss"],names:[],mappings:"AAAA,mBACI,YAAa,CACb,kBAAmB,CACnB,cAAe,CAHnB,qBAMQ,aAAc,CACd,iBAAkB,CAP1B,uFAYY,aAAc,CACd,UAAW,CAbvB,8BAiBY,iBAAkB,CAClB,iBAAkB,CAClB,MAAO,CACP,OAAQ,CACR,QAAS,CACT,gBAAkB,CAClB,+BAA8B,CAC9B,UAAc,CACd,iBAAkB,CAzB9B,uCA4BgB,mCAA8B,CAC9B,UAAc,CA7B9B,mCAkCY,kBAAmB",file:"flow-gallery.scss",sourcesContent:[".flow-gallery-grid {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n\n    > * {\n        display: block;\n        position: relative;\n\n        > img,\n        > picture,\n        > picture > img {\n            display: block;\n            width: 100%;\n        }\n\n        > .caption {\n            visibility: hidden;\n            position: absolute;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            padding: 0.5em 1em;\n            background-color: rgba(#000000, 0.7);\n            color: #ffffff;\n            text-align: center;\n\n            &.inverted {\n                background-color: rgba(#ffffff, 0.7);\n                color: #000000;\n            }\n        }\n\n        &:hover > .caption {\n            visibility: visible;\n        }\n    }\n}\n"]}])},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(l," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")}));return[n].concat(o).concat([i]).join("\n")}var s,a,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var s=0;s<t.length;s++){var a=t[s];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="(".concat(a[2],") and (").concat(n,")")),e.push(a))}},e}},function(t,e,n){var r,i,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=function(t,e){return e?e.querySelector(t):document.querySelector(t)},l=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var r=a.call(this,t,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),c=null,u=0,f=[],h=n(7);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(m(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(m(r.parts[s],e));o[r.id]={id:r.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function g(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),f.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(t.insertAt.before,n);n.insertBefore(e,i)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return b(e,t.attrs),g(t,e),e}function b(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function m(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var s=u++;n=c||(c=v(e)),r=x.bind(null,n,s,!1),i=x.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),g(t,e),e}(e),r=B.bind(null,n,e),i=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=C.bind(null,n),i=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return p(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var s=n[i];(a=o[s.id]).refs--,r.push(a)}t&&p(d(t,e),e);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete o[a.id]}}}};var A,w=(A=[],function(t,e){return A[t]=e,A.filter(Boolean).join("\n")});function x(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function C(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function B(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=h(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}}]).default}));
//# sourceMappingURL=flow-gallery.min.js.map